<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>Shopping Cart</title>
</head>
<body class="cartb">
    <header>
        <div>    
<i class="fas fa-user" id="font"></i>
<i class="fas fa-search" id="ser"></i>
            <input type="text" placeholder="Search" class="search-bar">
            <button class="main">Login</button>
            <button class="main">Sign up</button>
        </div>
    </header>

    <section class="logo-section">
        <img src="logoo.jpg" alt="Your Logo" class="logo">
    </section>

    <nav class="navbar navbar-expand-sm " id="nav">
        <div class="container-fluid">
        <ul class="navbar-nav  mx-auto">
            <li class="nav-item ">
                <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item ">
                <a class="nav-link" href="categories.html">Categories</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="cart.html">Cart</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="Payment_Recipt.html">Payment Receipt</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="contact.html">Contact Us</a>
            </li> <div class="dropdown">
                <button class="dropbtn">Categories
                <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content">
                <a href="#">Fiction</a>
                <a href="#">Dystopian</a>
                <a href="#">Science Fiction</a>
                <a href="#">Fantasy</a>
                <a href="#">Mystery</a>
                <a href="#">Historical Fiction</a>
                <a href="#">Gothic</a>
                <a href="#">Horror</a>
                <a href="#">Philosophical</a>
                <a href="#">Contemporary</a>
                <a href="#">Autobiographical</a>
                <a href="#">Adventure</a>
                </div>
            </div> 
        </ul>
        </div>
    </nav>

    <header class="main2">
        <h2>Your Cart</h2>
    </header>

    <section id="cartContainer">
    </section>

    <div id="totalAmount">Total Amount: $0.00</div>

    <button id="proceedToPayment" onclick="proceedToPayment()">Proceed to Payment</button>

    <footer class="foot">
        <p>&copy; 2023 House of books. All rights reserved.</p>
    </footer>

    <script>
        fetch('books.json')
            .then(response => response.json())
            .then(data => displayCartItems(data));
    
        let cartItems = JSON.parse(localStorage.getItem('cart')) || [];
        function displayCartItems(books) {
            const cartContainer = document.getElementById('cartContainer');
            const totalAmountElement = document.getElementById('totalAmount');
            cartContainer.innerHTML = '';
    
            let totalAmount = 0;
    
            cartItems.forEach(cartItem => {
                const cartItemContainer = document.createElement('div');
                cartItemContainer.classList.add('cart-item');
    
                const title = document.createElement('h5');
                title.textContent = cartItem.title;
    
                const quantityInput = document.createElement('input');
                quantityInput.classList.add('quantity-input');
                quantityInput.type = 'number';
                quantityInput.value = cartItem.quantity;
                quantityInput.min = 1;
                quantityInput.addEventListener('input', () => updateQuantity(cartItem, quantityInput));
    
                const price = document.createElement('p');
                price.textContent = `Price: $${cartItem.price.toFixed(2)}`;
    
                const removeButton = document.createElement('span');
                removeButton.classList.add('remove-button');
                removeButton.textContent = 'Remove';
                removeButton.addEventListener('click', () => removeFromCart(cartItem));
    
                cartItemContainer.appendChild(title);
                cartItemContainer.appendChild(quantityInput);
                cartItemContainer.appendChild(price);
                cartItemContainer.appendChild(removeButton);
    
                cartContainer.appendChild(cartItemContainer);
    
                totalAmount += cartItem.price * cartItem.quantity;
            });
    
            totalAmountElement.textContent = `Total Amount: $${totalAmount.toFixed(2)}`;
        }

        function updateQuantity(cartItem, quantityInput) {
            const newQuantity = parseInt(quantityInput.value, 10);
            cartItem.quantity = newQuantity;

            localStorage.setItem('cart', JSON.stringify(cartItems));
            displayCartItems();
        }
        function removeFromCart(cartItem) {
            cartItems = cartItems.filter(item => item.title !== cartItem.title);
            localStorage.setItem('cart', JSON.stringify(cartItems));
            displayCartItems();
        }
        function proceedToPayment() {
            window.location.href = 'Payment_Recipt.html';
        }
    </script>


</body>
</html>
